- name: Case 1, two-parent household with three children applying for TANF.
  period: 2024-01
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 35
        employment_income: 12_000  # $1,000/month
      person2:
        age: 33
        employment_income: 0
      person3:
        age: 10
        is_tax_unit_dependent: true
      person4:
        age: 7
        is_tax_unit_dependent: true
      person5:
        age: 3
        is_tax_unit_dependent: true
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4, person5]
        is_tanf_enrolled: false
        spm_unit_assets: 2_000
    tax_units:
      tax_unit:
        members: [person1, person2, person3, person4, person5]
    households:
      household:
        members: [person1, person2, person3, person4, person5]
        state_code: CT
  output:
    # Demographics: Has children, all US citizens
    # Immigration: All eligible
    # Assets: $2,000 < $6,000 limit
    ct_tanf_resources_eligible: true

    # Income calculation (applicant)
    # Gross earned: $1,000/month
    # Applicant disregard: $90 per person
    # Countable earned: max($1,000 - $90, 0) = $910
    # No unearned income
    # Countable income: $910
    ct_tanf_countable_earned_income: 910
    ct_tanf_countable_unearned_income: 0
    ct_tanf_countable_income: 910

    # Income test: $910 < 55% FPL for 5 ($1,326.65)
    ct_tanf_income_eligible: true

    # Eligibility: All tests pass
    ct_tanf_eligible: true

    # Benefit calculation
    # Payment standard for 5: $1,177
    # Benefit: $1,177 - $910 = $267
    ct_tanf_payment_standard: 1_177
    ct_tanf: 267

- name: Case 2, single parent recipient with child support and moderate earnings.
  period: 2024-01
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 30
        employment_income: 15_000  # $1,250/month
        child_support_received: 1_200  # $100/month
      person2:
        age: 4
        is_tax_unit_dependent: true
    spm_units:
      spm_unit:
        members: [person1, person2]
        is_tanf_enrolled: true
        spm_unit_assets: 1_500
    tax_units:
      tax_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: CT
  output:
    # Demographics: Has child, US citizens
    # Assets: $1,500 < $6,000 limit
    ct_tanf_resources_eligible: true

    # Income calculation (recipient)
    # Gross earned: $1,250/month ($15,000/12)
    # Recipient FPL disregard: $1,580 (FPL for 2)
    # Countable earned: max($1,250 - $1,580, 0) = $0
    ct_tanf_countable_earned_income: 0

    # Child support: $100/month ($1,200/12)
    # Passthrough: min($100, $50) = $50
    # Countable unearned: $100 - $50 = $50
    ct_tanf_countable_unearned_income: 50

    # Total countable income: $0 + $50 = $50
    ct_tanf_countable_income: 50

    # Income test: $50 < 100% FPL ($1,580)
    ct_tanf_income_eligible: true

    # Eligibility: All tests pass
    ct_tanf_eligible: true

    # Benefit calculation
    # Payment standard for 2: $661
    # Benefit: $661 - $50 = $611
    ct_tanf_payment_standard: 661
    ct_tanf: 611

- name: Case 3, family of four with moderate earnings in extended eligibility range.
  period: 2024-01
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 40
        employment_income: 48_000  # $4,000/month
      person2:
        age: 38
        employment_income: 0
      person3:
        age: 12
        is_tax_unit_dependent: true
      person4:
        age: 9
        is_tax_unit_dependent: true
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4]
        is_tanf_enrolled: true
        spm_unit_assets: 3_500
    tax_units:
      tax_unit:
        members: [person1, person2, person3, person4]
    households:
      household:
        members: [person1, person2, person3, person4]
        state_code: CT
  output:
    # Demographics: Has children, US citizens
    # Assets: $3,500 < $6,000 limit
    ct_tanf_resources_eligible: true

    # Income calculation (recipient)
    # Gross earned: $4,000/month ($48,000/12)
    # Recipient FPL disregard: $2,410 (FPL for 4)
    # Countable earned: max($4,000 - $2,410, 0) = $1,590
    ct_tanf_countable_earned_income: 1_590

    # No unearned income
    ct_tanf_countable_unearned_income: 0

    # Total countable income: $1,590
    ct_tanf_countable_income: 1_590

    # Income test (recipient):
    # Countable income $1,590 > 100% FPL ($2,410) - false, passes standard
    # But gross earnings $4,000 < 230% FPL ($5,543) - extended eligible
    ct_tanf_income_eligible: true

    # Eligibility: All tests pass
    ct_tanf_eligible: true

    # Benefit calculation
    # Payment standard for 4: $1,044
    # Standard benefit: $1,044 - $1,590 = -$546 â†’ $0
    # Gross earnings $4,000 is in reduction tier (171%-230% FPL = $4,121-$5,543)
    # Actually, $4,000 < $4,121 (171% FPL), so no reduction
    ct_tanf_payment_standard: 1_044
    ct_tanf: 0

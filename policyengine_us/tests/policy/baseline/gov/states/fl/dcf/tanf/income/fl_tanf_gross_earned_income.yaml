# Unit tests for fl_tanf_gross_earned_income variable
# Tests student earnings exclusion

- name: No employment income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 0

- name: Adult with employment income, not a student.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income: 6_000  # $500/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 500

- name: Student under 19, income excluded.
  period: 2024-01
  input:
    people:
      person1:
        age: 17
        is_full_time_student: true
        employment_income: 3_600  # $300/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 0

- name: Student exactly 18, income excluded.
  period: 2024-01
  input:
    people:
      person1:
        age: 18
        is_full_time_student: true
        employment_income: 3_600  # $300/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 0

- name: Student exactly 19, income NOT excluded (over threshold).
  period: 2024-01
  input:
    people:
      person1:
        age: 19
        is_full_time_student: true
        employment_income: 3_600  # $300/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 300

- name: Non-student under 19, income NOT excluded.
  period: 2024-01
  input:
    people:
      person1:
        age: 17
        is_full_time_student: false
        employment_income: 3_600  # $300/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 300

- name: Parent with student child, both earning.
  period: 2024-01
  input:
    people:
      person1:
        age: 35
        employment_income: 6_000  # $500/month
      person2:
        age: 17
        is_full_time_student: true
        employment_income: 3_600  # $300/month, excluded
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: FL
  output:
    # Only parent income counted
    fl_tanf_gross_earned_income: 500

- name: Two adults, both earning.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income: 7_200  # $600/month
      person2:
        age: 28
        employment_income: 4_800  # $400/month
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: FL
  output:
    fl_tanf_gross_earned_income: 1_000

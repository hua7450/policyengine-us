# Florida TANF (Temporary Cash Assistance - TCA) Integration Tests
# Based on Florida Statute § 414.095 and Florida Administrative Code Chapter 65A-4
# Documentation: working_references.md (Florida TANF section)
# Last Updated: October 21, 2025

# ==================== BASIC ELIGIBILITY TESTS ====================

# Test 1: Single parent with two children, moderate earned income, Tier 3 shelter
# Example from working_references.md benefit calculation
- name: Single parent with two children, $500 monthly earnings, high shelter costs
  period: 2024-01
  input:
    people:
      parent:
        age: 30
        employment_income: 6_000  # $500/month × 12
        rent: 7_200  # $600/month × 12 (>$50 = Tier 3)
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Family size: 3
    # Shelter tier: 3 ($600/month rent > $50)
    # Gross income: $500/month
    # 185% FPL for family of 3: $3,981/month - PASSES
    # Earned income disregard (from working_references.md):
    #   Step 1: $500 - $90 standard disregard = $410
    #   Step 2: $200 + 50% of remainder disregard
    #           $410 - $200 = $210
    #           $210 × 0.5 = $105 (disregarded portion)
    #   Countable earned: $210 - $105 = $105
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $105 = $198
    fl_tanf_shelter_tier: 3
    fl_tanf_gross_income: 500
    fl_tanf_countable_income: 105
    fl_tanf_payment_standard: 303
    fl_tanf_income_eligible: true
    fl_tanf_eligible: true
    fl_tanf: 2_376  # $198 × 12 months

# Test 2: Income exceeds payment standard - ineligible
# Based on working_references.md calculation methodology
- name: Single parent with one child, $800 monthly earnings, countable income exceeds payment standard
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        employment_income: 9_600  # $800/month × 12
        rent: 7_200  # $600/month × 12 (Tier 3)
      child:
        age: 6
    spm_units:
      spm_unit:
        members: [parent, child]
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: FL
  output:
    # Family size: 2
    # Gross income: $800/month - PASSES 185% FPL test ($3,151)
    # Earned income disregard:
    #   Step 1: $800 - $90 = $710
    #   Step 2: ($710 - $200) × 0.5 = $255 disregard
    #   Countable: $510 - $255 = $255
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $255 = -$14 → INELIGIBLE (countable exceeds payment)
    fl_tanf_countable_income: 255
    fl_tanf_payment_standard: 241
    fl_tanf_eligible: false
    fl_tanf: 0

# ==================== THREE-TIER SHELTER PAYMENT TESTS ====================

# Test 3: Tier 1 - No shelter costs (lowest benefit tier)
- name: Family of three with no shelter costs - Tier 1
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 0  # No shelter costs
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Shelter tier: 1 ($0 rent)
    # Countable earned income: $105 (same calculation as Test 1)
    # Payment standard (Tier 1, size 3): $198
    # Benefit: $198 - $105 = $93
    fl_tanf_shelter_tier: 1
    fl_tanf_payment_standard: 198
    fl_tanf_eligible: true
    fl_tanf: 1_116  # $93 × 12 months

# Test 4: Tier 2 - Low shelter costs ($1-$50)
- name: Family of three with low shelter costs - Tier 2
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 360  # $30/month × 12 (between $1-$50 = Tier 2)
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Shelter tier: 2 ($30/month rent between $1-$50)
    # Countable earned income: $105
    # Payment standard (Tier 2, size 3): $258
    # Benefit: $258 - $105 = $153
    fl_tanf_shelter_tier: 2
    fl_tanf_payment_standard: 258
    fl_tanf_eligible: true
    fl_tanf: 1_836  # $153 × 12 months

# Test 5: Shelter tier boundary - exactly $50/month (Tier 2 upper boundary)
- name: Family with exactly $50 monthly shelter costs - Tier 2
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 600  # $50/month × 12 (exactly $50 = Tier 2)
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Shelter tier: 2 (exactly $50/month = Tier 2 upper boundary)
    # Benefit same as Tier 2: $153/month
    fl_tanf_shelter_tier: 2
    fl_tanf: 1_836

# Test 6: Shelter tier boundary - just over $50/month (Tier 3 starts)
- name: Family with $51 monthly shelter costs - Tier 3
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 612  # $51/month × 12 (>$50 = Tier 3)
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Shelter tier: 3 ($51/month > $50)
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $198/month (as in Test 1)
    fl_tanf_shelter_tier: 3
    fl_tanf_payment_standard: 303
    fl_tanf: 2_376

# Test 7: Tier 2 lower boundary - exactly $1/month
- name: Family with $1 monthly shelter costs - Tier 2
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 12  # $1/month × 12 (Tier 2 starts at $1)
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Shelter tier: 2 ($1/month is Tier 2 minimum)
    fl_tanf_shelter_tier: 2
    fl_tanf_payment_standard: 258
    fl_tanf: 1_836

# ==================== UNEARNED INCOME TESTS ====================

# Test 8: Child support income only (with $50 disregard)
# Based on working_references.md child support exclusion
- name: Single parent with two children, child support only, low shelter costs
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        child_support_received: 1_200  # $100/month × 12
        rent: 360  # $30/month × 12 (Tier 2)
      child1:
        age: 10
      child2:
        age: 7
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Unearned income (child support): $100/month
    # First $50 excluded per working_references.md
    # Countable: $100 - $50 = $50
    # Payment standard (Tier 2, size 3): $258
    # Benefit: $258 - $50 = $208
    fl_tanf_gross_unearned_income: 100
    fl_tanf_countable_unearned_income: 50
    fl_tanf_countable_income: 50
    fl_tanf_eligible: true
    fl_tanf: 2_496  # $208 × 12 months

# Test 9: Combined earned and unearned income
- name: Single parent with earned income and child support
  period: 2024-01
  input:
    people:
      parent:
        age: 33
        employment_income: 4_800  # $400/month × 12
        child_support_received: 1_800  # $150/month × 12
        rent: 7_200  # $600/month × 12 (Tier 3)
      child1:
        age: 7
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Gross earned income: $400/month
    # Earned income disregard:
    #   Step 1: $400 - $90 = $310
    #   Step 2: ($310 - $200) × 0.5 = $55 disregard
    #   Countable earned: $110 - $55 = $55
    # Child support: $150/month
    #   First $50 excluded: $150 - $50 = $100 countable
    # Total countable income: $55 + $100 = $155
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $155 = $148
    fl_tanf_countable_earned_income: 55
    fl_tanf_countable_unearned_income: 100
    fl_tanf_countable_income: 155
    fl_tanf_eligible: true
    fl_tanf: 1_776  # $148 × 12 months

# Test 10: Child support less than $50 (fully excluded)
- name: Single parent with child support less than $50 exclusion
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        child_support_received: 360  # $30/month × 12 (less than $50/month)
        rent: 7_200  # Tier 3
      child1:
        age: 5
      child2:
        age: 3
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Unearned income (child support): $30/month
    # First $50 excluded: $30 < $50, so $0 countable
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $0 = $303
    fl_tanf_countable_unearned_income: 0
    fl_tanf_countable_income: 0
    fl_tanf: 3_636

# ==================== NO INCOME / MAXIMUM BENEFIT TESTS ====================

# Test 11: Maximum benefit for family of 2 - Tier 1
- name: Single parent with one child, no income, no shelter obligation
  period: 2024-01
  input:
    people:
      parent:
        age: 25
        rent: 0
      child:
        age: 3
    spm_units:
      spm_unit:
        members: [parent, child]
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: FL
  output:
    # Family size: 2, Tier 1
    # Countable income: $0
    # Payment standard (Tier 1, size 2): $158
    # Benefit: $158 - $0 = $158
    fl_tanf_shelter_tier: 1
    fl_tanf_payment_standard: 158
    fl_tanf_countable_income: 0
    fl_tanf_eligible: true
    fl_tanf: 1_896

# Test 12: Maximum benefit for family of 3 - Tier 3
- name: Single parent with two children, no income, high shelter costs
  period: 2024-01
  input:
    people:
      parent:
        age: 29
        rent: 7_200  # $600/month × 12 (Tier 3)
      child1:
        age: 6
      child2:
        age: 3
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Family size: 3, Tier 3
    # Countable income: $0
    # Payment standard (Tier 3, size 3): $303 (frozen since 1992)
    # Benefit: $303 - $0 = $303
    fl_tanf_shelter_tier: 3
    fl_tanf_payment_standard: 303
    fl_tanf_countable_income: 0
    fl_tanf_eligible: true
    fl_tanf: 3_636

# Test 13: Maximum benefit for family of 1 - Tier 3
- name: Single adult no children, no income, high shelter (pregnant in final trimester)
  period: 2024-01
  input:
    people:
      parent:
        age: 24
        is_pregnant: true
        rent: 7_200  # Tier 3
    spm_units:
      spm_unit:
        members: [parent]
    tax_units:
      tax_unit:
        members: [parent]
    households:
      household:
        members: [parent]
        state_code: FL
  output:
    # Family size: 1 (pregnant woman in final trimester qualifies)
    # Shelter tier: 3
    # Payment standard (Tier 3, size 1): $180
    # Benefit: $180 - $0 = $180
    fl_tanf_shelter_tier: 3
    fl_tanf_payment_standard: 180
    fl_tanf_eligible: true
    fl_tanf: 2_160

# ==================== INCOME THRESHOLD TESTS (185% FPL) ====================

# Test 14: Income just below 185% FPL threshold (but exceeds payment standard)
- name: Family of three with income just under gross income limit
  period: 2024-01
  input:
    people:
      parent:
        age: 32
        employment_income: 47_000  # Just under $47,767 annual limit for family of 3
        rent: 7_200  # Tier 3
      child1:
        age: 8
      child2:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Gross income: $3,917/month (47,000 / 12)
    # Gross income limit (185% FPL for 3): $3,981/month
    # PASSES gross income test
    # Countable income calculation:
    #   Step 1: $3,917 - $90 = $3,827
    #   Step 2: ($3,827 - $200) × 0.5 = $1,814 disregard
    #   Countable: $3,627 - $1,814 = $1,813
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $1,813 = -$1,510 → INELIGIBLE (countable exceeds payment)
    fl_tanf_income_eligible: false
    fl_tanf_eligible: false
    fl_tanf: 0

# Test 15: Income just above 185% FPL threshold (fails gross test)
- name: Family of three with income just over gross income limit
  period: 2024-01
  input:
    people:
      parent:
        age: 29
        employment_income: 48_000  # Just over $47,767 annual limit for family of 3
        rent: 7_200  # Tier 3
      child1:
        age: 11
      child2:
        age: 7
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Gross income: $4,000/month (48,000 / 12)
    # Gross income limit (185% FPL for 3): $3,981/month
    # FAILS gross income test → INELIGIBLE
    fl_tanf_income_eligible: false
    fl_tanf_eligible: false
    fl_tanf: 0

# Test 16: Family of 4 at exactly 185% FPL
- name: Family of four with income at exactly 185% FPL threshold
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        employment_income: 57_720  # Exactly $57,720 annual (185% FPL for 4)
        rent: 7_200  # Tier 3
      child1:
        age: 12
      child2:
        age: 9
      child3:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: FL
  output:
    # Gross income: $4,810/month
    # Gross income limit: $4,810/month (exactly at threshold)
    # Should PASS (at threshold = eligible for gross test)
    # But countable income will exceed payment standard
    fl_tanf_income_eligible: false
    fl_tanf_eligible: false
    fl_tanf: 0

# ==================== LOW INCOME QUALIFYING TESTS ====================

# Test 17: Low earned income qualifying family
- name: Single parent with one child, low earned income
  period: 2024-01
  input:
    people:
      parent:
        age: 27
        employment_income: 3_600  # $300/month × 12
        rent: 7_200  # Tier 3
      child:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child]
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: FL
  output:
    # Gross income: $300/month
    # Earned income disregard:
    #   Step 1: $300 - $90 = $210
    #   Step 2: ($210 - $200) = $10
    #           $10 × 0.5 = $5 disregard
    #   Countable: $10 - $5 = $5
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $5 = $236
    fl_tanf_countable_income: 5
    fl_tanf_payment_standard: 241
    fl_tanf_eligible: true
    fl_tanf: 2_832

# Test 18: Earned income exactly at $200 (tests disregard formula boundary)
- name: Family with earned income exactly $200/month
  period: 2024-01
  input:
    people:
      parent:
        age: 30
        employment_income: 2_400  # $200/month × 12
        rent: 7_200  # Tier 3
      child1:
        age: 6
      child2:
        age: 3
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Gross income: $200/month
    # Earned income disregard:
    #   Step 1: $200 - $90 = $110
    #   Step 2: $110 - $200 = -$90 (negative, so no additional disregard)
    #   Countable: $0 (all income disregarded when ≤ $200 after $90)
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $0 = $303
    fl_tanf_countable_income: 0
    fl_tanf_eligible: true
    fl_tanf: 3_636

# Test 19: Earned income below $90 standard disregard
- name: Family with very low earned income below $90
  period: 2024-01
  input:
    people:
      parent:
        age: 26
        employment_income: 600  # $50/month × 12
        rent: 7_200  # Tier 3
      child:
        age: 2
    spm_units:
      spm_unit:
        members: [parent, child]
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: FL
  output:
    # Gross income: $50/month
    # After $90 disregard: $0 (disregard exceeds income)
    # Countable: $0
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $0 = $241
    fl_tanf_countable_income: 0
    fl_tanf_eligible: true
    fl_tanf: 2_892

# ==================== TWO-PARENT FAMILY TESTS ====================

# Test 20: Two-parent family with mixed income sources
- name: Two-parent family with four children, mixed income sources
  period: 2024-01
  input:
    people:
      parent1:
        age: 35
        employment_income: 12_000  # $1,000/month × 12
        rent: 4_800  # $400/month × 12 (Tier 3)
      parent2:
        age: 33
        employment_income: 3_600  # $300/month × 12
      child1:
        age: 12
      child2:
        age: 9
      child3:
        age: 6
      child4:
        age: 4
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1, child2, child3, child4]
    tax_units:
      tax_unit:
        members: [parent1, parent2, child1, child2, child3, child4]
    households:
      household:
        members: [parent1, parent2, child1, child2, child3, child4]
        state_code: FL
  output:
    # Family size: 6
    # Gross income: $1,300/month
    # Earned income disregard (2 earners × $90 = $180):
    #   Step 1: $1,300 - $180 = $1,120
    #   Step 2: ($1,120 - $200) × 0.5 = $460 disregard
    #   Countable: $920 - $460 = $460
    # Payment standard (Tier 3, size 6): $487
    # Benefit: $487 - $460 = $27
    fl_tanf_payment_standard: 487
    fl_tanf_countable_income: 460
    fl_tanf_eligible: true
    fl_tanf: 324

# Test 21: Two-parent family with one earner
- name: Two-parent family with three children, one earner
  period: 2024-01
  input:
    people:
      parent1:
        age: 36
        employment_income: 9_000  # $750/month × 12
        rent: 7_200  # Tier 3
      parent2:
        age: 34
      child1:
        age: 10
      child2:
        age: 7
      child3:
        age: 3
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent1, parent2, child1, child2, child3]
    households:
      household:
        members: [parent1, parent2, child1, child2, child3]
        state_code: FL
  output:
    # Family size: 5
    # Gross income: $750/month
    # Earned income disregard:
    #   Step 1: $750 - $90 = $660
    #   Step 2: ($660 - $200) × 0.5 = $230 disregard
    #   Countable: $460 - $230 = $230
    # Payment standard (Tier 3, size 5): $426
    # Benefit: $426 - $230 = $196
    fl_tanf_payment_standard: 426
    fl_tanf_countable_income: 230
    fl_tanf_eligible: true
    fl_tanf: 2_352

# ==================== LARGE FAMILY TESTS ====================

# Test 22: Family of 5 with moderate income (becomes ineligible)
- name: Single parent with four children, moderate earned income
  period: 2024-01
  input:
    people:
      parent:
        age: 38
        employment_income: 18_000  # $1,500/month × 12
        rent: 7_200  # Tier 3
      child1:
        age: 14
      child2:
        age: 11
      child3:
        age: 8
      child4:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3, child4]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3, child4]
    households:
      household:
        members: [parent, child1, child2, child3, child4]
        state_code: FL
  output:
    # Family size: 5
    # Gross income: $1,500/month (under 185% FPL of $5,639)
    # Earned income disregard:
    #   Step 1: $1,500 - $90 = $1,410
    #   Step 2: ($1,410 - $200) × 0.5 = $605 disregard
    #   Countable: $1,210 - $605 = $605
    # Payment standard (Tier 3, size 5): $426
    # Benefit: $426 - $605 = -$179 → INELIGIBLE
    fl_tanf_countable_income: 605
    fl_tanf_eligible: false
    fl_tanf: 0

# Test 23: Very large family (10 people) with low income
- name: Large family with eight children, minimal income
  period: 2024-01
  input:
    people:
      parent1:
        age: 42
        employment_income: 7_200  # $600/month × 12
        rent: 7_200  # Tier 3
      parent2:
        age: 40
      child1:
        age: 16
      child2:
        age: 14
      child3:
        age: 12
      child4:
        age: 10
      child5:
        age: 8
      child6:
        age: 6
      child7:
        age: 4
      child8:
        age: 2
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1, child2, child3, child4, child5, child6, child7, child8]
    tax_units:
      tax_unit:
        members: [parent1, parent2, child1, child2, child3, child4, child5, child6, child7, child8]
    households:
      household:
        members: [parent1, parent2, child1, child2, child3, child4, child5, child6, child7, child8]
        state_code: FL
  output:
    # Family size: 10
    # Countable: $155 (from disregard calculation)
    # Payment standard (Tier 3, size 10): $733
    # Benefit: $733 - $155 = $578
    fl_tanf_payment_standard: 733
    fl_tanf_countable_income: 155
    fl_tanf_eligible: true
    fl_tanf: 6_936

# ==================== PREGNANT WOMAN TESTS ====================

# Test 24: Pregnant woman in final trimester, no children
- name: Pregnant woman in final trimester, no income, Tier 3
  period: 2024-01
  input:
    people:
      parent:
        age: 24
        is_pregnant: true
        rent: 7_200  # Tier 3
    spm_units:
      spm_unit:
        members: [parent]
    tax_units:
      tax_unit:
        members: [parent]
    households:
      household:
        members: [parent]
        state_code: FL
  output:
    # Family size: 1 (pregnant woman in final trimester qualifies per FL statute)
    # Payment standard (Tier 3, size 1): $180
    # Benefit: $180 - $0 = $180
    fl_tanf_eligible: true
    fl_tanf: 2_160

# Test 25: Pregnant woman with one child and earned income
- name: Pregnant woman with one child, part-time employment
  period: 2024-01
  input:
    people:
      parent:
        age: 26
        is_pregnant: true
        employment_income: 4_800  # $400/month × 12
        rent: 7_200  # Tier 3
      child:
        age: 3
    spm_units:
      spm_unit:
        members: [parent, child]
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: FL
  output:
    # Family size: 2
    # Countable: $55 (from disregard calculation)
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $55 = $186
    fl_tanf_eligible: true
    fl_tanf: 2_232

# ==================== STUDENT INCOME EXCLUSION TESTS ====================

# Test 26: High school student child with earnings (should be excluded)
# Based on Florida Statute § 414.095(9) - student earned income exclusion
- name: Single parent with teen in high school who has part-time job
  period: 2024-01
  input:
    people:
      parent:
        age: 40
        employment_income: 6_000  # $500/month × 12
        rent: 7_200  # Tier 3
      teen:
        age: 17
        employment_income: 3_600  # $300/month × 12 - should be excluded
        is_full_time_student: true
    spm_units:
      spm_unit:
        members: [parent, teen]
    tax_units:
      tax_unit:
        members: [parent, teen]
    households:
      household:
        members: [parent, teen]
        state_code: FL
  output:
    # Family size: 2
    # Parent gross income: $500/month (teen income excluded per statute)
    # Countable: $105
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $105 = $136
    fl_tanf_eligible: true
    fl_tanf: 1_632

# Test 27: Student age 19 (over student exclusion age limit)
- name: Single parent with 19-year-old in high school who has part-time job
  period: 2024-01
  input:
    people:
      parent:
        age: 42
        employment_income: 6_000  # $500/month × 12
        rent: 7_200  # Tier 3
      teen:
        age: 19
        employment_income: 3_600  # $300/month × 12 - NOT excluded (age 19)
        is_full_time_student: true
    spm_units:
      spm_unit:
        members: [parent, teen]
    tax_units:
      tax_unit:
        members: [parent, teen]
    households:
      household:
        members: [parent, teen]
        state_code: FL
  output:
    # Family size: 2
    # Total gross income: $800/month (parent + teen, teen not excluded)
    # Countable: $210
    # Payment standard (Tier 3, size 2): $241
    # Benefit: $241 - $210 = $31
    fl_tanf_eligible: true
    fl_tanf: 372

# ==================== MULTIPLE EARNERS TESTS ====================

# Test 28: Three earners in household (testing per-person $90 disregard)
- name: Two-parent household with working teen, all three earning
  period: 2024-01
  input:
    people:
      parent1:
        age: 38
        employment_income: 7_200  # $600/month × 12
        rent: 7_200  # Tier 3
      parent2:
        age: 36
        employment_income: 4_800  # $400/month × 12
      teen:
        age: 19
        employment_income: 2_400  # $200/month × 12
    spm_units:
      spm_unit:
        members: [parent1, parent2, teen]
    tax_units:
      tax_unit:
        members: [parent1, parent2, teen]
    households:
      household:
        members: [parent1, parent2, teen]
        state_code: FL
  output:
    # Family size: 3
    # Total gross income: $1,200/month
    # Earned income disregard (3 earners × $90 = $270):
    #   Step 1: $1,200 - $270 = $930
    #   Step 2: ($930 - $200) × 0.5 = $365 disregard
    #   Countable: $730 - $365 = $365
    # Payment standard (Tier 3, size 3): $303
    # Benefit: $303 - $365 = -$62 → INELIGIBLE
    fl_tanf_countable_income: 365
    fl_tanf_eligible: false
    fl_tanf: 0

# ==================== MINIMUM BENEFIT THRESHOLD TESTS ====================

# Test 29: Benefit just above $10 minimum threshold
- name: Family with income resulting in $11 monthly benefit
  period: 2024-01
  input:
    people:
      parent:
        age: 30
        employment_income: 5_544  # Calculated to result in ~$11 benefit
        rent: 7_200  # Tier 3
      child1:
        age: 7
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Based on minimum benefit = $10 (below this = ineligible for cash)
    # Should be eligible and receive benefit
    fl_tanf_eligible: true

# Test 30: Benefit exactly at $10 minimum threshold
- name: Family with income resulting in exactly $10 monthly benefit
  period: 2024-01
  input:
    people:
      parent:
        age: 30
        employment_income: 5_556  # Calculated to result in exactly $10 benefit
        rent: 7_200  # Tier 3
      child1:
        age: 7
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Benefit exactly at $10 threshold
    # Should be eligible
    fl_tanf_eligible: true

# ==================== FAMILY CAP TESTS ====================
# Note: Family cap implementation currently returns 0 (placeholder)
# These tests are ready for when family cap is fully implemented

# Test 31: Second child born while on TANF (50% reduction per statute)
- name: Family with second child born on TANF - family cap applies
  period: 2024-01
  input:
    people:
      parent:
        age: 28
        employment_income: 6_000  # $500/month × 12
        rent: 7_200  # Tier 3
      child1:
        age: 5  # Born before TANF
      child2:
        age: 1  # Born while on TANF
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    tax_units:
      tax_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: FL
  output:
    # Current implementation: family cap placeholder returns 0
    # Expected when implemented: 50% reduction for 2nd child
    # For now, tests normal benefit calculation
    fl_tanf_eligible: true

# Test 32: Third child born while on TANF (zero assistance per statute)
- name: Family with third child born on TANF - family cap applies
  period: 2024-01
  input:
    people:
      parent:
        age: 32
        employment_income: 6_000  # $500/month × 12
        rent: 7_200  # Tier 3
      child1:
        age: 8  # Born before TANF
      child2:
        age: 3  # Born on TANF (2nd child)
      child3:
        age: 1  # Born on TANF (3rd child)
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: FL
  output:
    # Current implementation: family cap placeholder returns 0
    # Expected when implemented: exclude 3rd+ child from benefit calculation
    # For now, tests normal benefit calculation
    fl_tanf_eligible: true

# ==================== PAYMENT STANDARD TIER VARIATION TESTS ====================

# Test 33: All three tiers for same family size (family of 4)
- name: Family of four, Tier 1 - no shelter
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        employment_income: 6_000  # $500/month
        rent: 0  # Tier 1
      child1:
        age: 10
      child2:
        age: 7
      child3:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: FL
  output:
    # Tier 1, size 4: $254
    # Countable: $105
    # Benefit: $254 - $105 = $149
    fl_tanf_shelter_tier: 1
    fl_tanf_payment_standard: 254
    fl_tanf_eligible: true
    fl_tanf: 1_788

- name: Family of four, Tier 2 - low shelter
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        employment_income: 6_000  # $500/month
        rent: 360  # $30/month (Tier 2)
      child1:
        age: 10
      child2:
        age: 7
      child3:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: FL
  output:
    # Tier 2, size 4: $309
    # Countable: $105
    # Benefit: $309 - $105 = $204
    fl_tanf_shelter_tier: 2
    fl_tanf_payment_standard: 309
    fl_tanf_eligible: true
    fl_tanf: 2_448

- name: Family of four, Tier 3 - high shelter
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        employment_income: 6_000  # $500/month
        rent: 7_200  # $600/month (Tier 3)
      child1:
        age: 10
      child2:
        age: 7
      child3:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    tax_units:
      tax_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: FL
  output:
    # Tier 3, size 4: $364
    # Countable: $105
    # Benefit: $364 - $105 = $259
    fl_tanf_shelter_tier: 3
    fl_tanf_payment_standard: 364
    fl_tanf_eligible: true
    fl_tanf: 3_108

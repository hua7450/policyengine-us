# Nebraska ADC Income Eligibility Tests
# Per 468 NAC: countable income must be strictly less than need standard
# Countable income = countable earned + unearned income

- name: Case 1, zero income is eligible.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: NE
  output:
    ne_adc_countable_income: 0
    ne_adc_need_standard: 843
    ne_adc_income_eligible: true
    # Countable ($0) < Need Standard ($843) -> true

- name: Case 2, income below threshold is eligible.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 12_000  # $1,000/month -> $500 countable
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        is_tanf_enrolled: true
    households:
      household:
        members: [person1, person2]
        state_code: NE
  output:
    ne_adc_countable_income: 500
    ne_adc_need_standard: 843
    ne_adc_income_eligible: true
    # Countable ($500) < Need Standard ($843) -> true

- name: Case 3, income above threshold is ineligible.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 24_000  # $2,000/month -> $1,000 countable
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        is_tanf_enrolled: true
    households:
      household:
        members: [person1, person2]
        state_code: NE
  output:
    ne_adc_countable_income: 1_000
    ne_adc_need_standard: 843
    ne_adc_income_eligible: false
    # Countable ($1,000) > Need Standard ($843) -> false

- name: Case 4, income exactly at threshold is ineligible.
  # Tests strict less-than comparison
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 20_232  # $1,686/month -> $843 countable
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        is_tanf_enrolled: true
    households:
      household:
        members: [person1, person2]
        state_code: NE
  output:
    ne_adc_countable_income: 843
    ne_adc_need_standard: 843
    ne_adc_income_eligible: false
    # Countable ($843) < Need Standard ($843) -> false (not strictly less)

- name: Case 5, mixed income at threshold is ineligible.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 6_000  # $500/month -> $250 countable earned
        social_security: 7_116  # $593/month unearned
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        is_tanf_enrolled: true
    households:
      household:
        members: [person1, person2]
        state_code: NE
  output:
    ne_adc_countable_earned_income: 250
    ne_adc_countable_income: 843
    # Total = $250 + $593 = $843
    ne_adc_need_standard: 843
    ne_adc_income_eligible: false
    # Countable ($843) < Need Standard ($843) -> false

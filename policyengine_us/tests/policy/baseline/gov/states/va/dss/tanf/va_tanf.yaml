- name: If ineligible, they get zero.
  period: 2023
  input:
    va_tanf_eligibility: false
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 1_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 3_000
    county_str: ARLINGTON_COUNTY_VA
  output:
    va_tanf: 0

- name: If tanf eligible, small payment is still paid.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 2_100
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 2_000
    county_str: ARLINGTON_COUNTY_VA
  output:
    # Grant standard $2,100 - countable income $2,000 = $100 payment
    va_tanf: 100

- name: If up tanf eligible, small payment is still paid.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: true
    va_tanf_grant_standard: 0
    va_tanf_up_grant_standard: 2_100
    va_tanf_countable_income: 2_000
    county_str: ARLINGTON_COUNTY_VA
  output:
    # UP grant standard $2,100 - countable income $2,000 = $100 payment
    va_tanf: 100

- name: If tanf eligible, payment less than maximum payment, they get the difference.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 10_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 4_000
    county_str: ARLINGTON_COUNTY_VA
  output:
    va_tanf: 6_000

- name: Grant equals countable income.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 4_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 4_000
    county_str: ARLINGTON_COUNTY_VA
  output:
    va_tanf: 0

- name: Zero countable income gets full grant below max.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 6_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 0
    county_str: ARLINGTON_COUNTY_VA
  output:
    va_tanf: 6_000

# Max payment cap tests -- max payment = ceil(base_max * standard_multiplier)
# For 2023: multiplier is 1.155 (Jan-Jun) and 1.2705 (Jul-Dec)
# Group III TANF: ceil(745*1.155)=861 (Jan-Jun), ceil(745*1.2705)=947 (Jul-Dec)
# Annual max = 6*861 + 6*947 = 10_848

- name: Group III TANF capped at scaled max payment.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 15_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 0
    county_str: ARLINGTON_COUNTY_VA
  output:
    # Payment 15000 capped at Group III max: 6*861 + 6*947 = 10_848
    va_tanf: 10_848

# Group II TANF: ceil(625*1.155)=722 (Jan-Jun), ceil(625*1.2705)=795 (Jul-Dec)
# Annual max = 6*722 + 6*795 = 9_102

- name: Group II TANF capped at scaled max payment.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 15_000
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 0
    county_str: PITTSYLVANIA_COUNTY_VA
  output:
    # Payment 15000 capped at Group II max: 6*722 + 6*795 = 9_102
    va_tanf: 9_102

# Group III TANF-UP: ceil(648*1.155)=749 (Jan-Jun), ceil(648*1.2705)=824 (Jul-Dec)
# Annual max = 6*749 + 6*824 = 9_438

- name: Group III TANF-UP capped at scaled max payment.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: true
    va_tanf_grant_standard: 0
    va_tanf_up_grant_standard: 15_000
    va_tanf_countable_income: 0
    county_str: ARLINGTON_COUNTY_VA
  output:
    # Payment 15000 capped at Group III UP max: 6*749 + 6*824 = 9_438
    va_tanf: 9_438

# Group II TANF-UP: ceil(544*1.155)=629 (Jan-Jun), ceil(544*1.2705)=692 (Jul-Dec)
# Annual max = 6*629 + 6*692 = 7_926

- name: Group II TANF-UP capped at scaled max payment.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: true
    va_tanf_grant_standard: 0
    va_tanf_up_grant_standard: 15_000
    va_tanf_countable_income: 0
    county_str: PITTSYLVANIA_COUNTY_VA
  output:
    # Payment 15000 capped at Group II UP max: 6*629 + 6*692 = 7_926
    va_tanf: 7_926

- name: Payment below cap is not reduced.
  period: 2023
  input:
    va_tanf_eligibility: true
    va_up_tanf_eligibility: false
    va_tanf_grant_standard: 9_600
    va_tanf_up_grant_standard: 0
    va_tanf_countable_income: 1_200
    county_str: ARLINGTON_COUNTY_VA
  output:
    # Payment = 9600 - 1200 = 8400, Group III monthly max = 861/947
    # Monthly payment = 700, which is below both caps
    va_tanf: 8_400
